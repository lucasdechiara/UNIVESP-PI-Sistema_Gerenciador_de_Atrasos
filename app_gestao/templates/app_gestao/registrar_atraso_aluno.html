{% extends 'app_gestao/base.html' %}

<!-- titulo da guia na página do navegador -->
{% block titulo %}
  <title>Registrar Atrasos</title>
{% endblock %}

{% block conteudo %}
  <main class="container mt-5" role="main" aria-labelledby="page-title">
    <h3 id="page-title" class="text-center" aria-label="Registrar Atraso de Aluno">
      <p class="text-center"><br>Registrar Atraso de Aluno</p>
    </h3>

    <!-- Exibição de Mensagens -->
    {% if messages %}
      <section role="alert" aria-live="assertive" aria-atomic="true" aria-label="Mensagens do sistema">
        {% for message in messages %}
          <div
            class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} alert-dismissible fade show"
            role="alert"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Fechar mensagem"
            ></button>
          </div>
        {% endfor %}
      </section>
    {% endif %}

    <form method="POST" role="form" aria-label="Formulário para registrar atraso de aluno">
      {% csrf_token %}

      {% if aluno %}
        <!-- Campo oculto para manter o RA encontrado -->
        <input type="hidden" name="ra" value="{{ ra }}" aria-hidden="true">

        <div class="mt-4" role="region" aria-labelledby="dados-aluno">
          <div class="row">
            <div class="col-md-6">
              <div class="card-body" aria-label="Informações do aluno">
                <h5 id="dados-aluno">Dados do Aluno:</h5>
                <p><strong>R.A.:</strong> {{ aluno.ra }}</p>
                <p><strong>Nome:</strong> {{ aluno.nome_estudante }}</p>
                <p><strong>Série/Turma:</strong> {{ aluno.serie_turma }}</p>
                <p><strong>Responsável 1:</strong> {{ aluno.responsavel1 }}</p>
                <p><strong>Responsável 2:</strong> {{ aluno.responsavel2 }}</p>
                <p><strong>Contato:</strong> {{ aluno.contato }}</p>
              </div>
            </div>

            <div class="col-md-6" role="group" aria-labelledby="form-dados-atraso">
              <h5 id="form-dados-atraso" class="visually-hidden">Formulário de atraso</h5>

              <label for="data_atraso" class="form-label" aria-label="Data em que ocorreu o atraso">Data do Atraso</label>
              <input
                type="date"
                name="data_atraso"
                id="data_atraso"
                class="form-control"
                required
                aria-required="true"
              >

              <label for="horario_chegada" class="form-label" aria-label="Horário em que o aluno chegou">Horário de Chegada</label>
              <input
                type="time"
                name="horario_chegada"
                id="horario_chegada"
                class="form-control"
                required
                aria-required="true"
              >

              <label for="justificativa" class="form-label" aria-label="Campo para descrever a justificativa do atraso">Justificativa</label>
              <textarea
                name="justificativa"
                id="justificativa"
                class="form-control"
                maxlength="255"
                rows="3"
                aria-describedby="justificativa-ajuda"
              ></textarea>
              <small id="justificativa-ajuda" class="form-text text-muted">
                Máximo de 255 caracteres.
              </small>
              <div>
                <button
                  type="submit"
                  name="salvar"
                  class="btn btn-primary mt-3"
                  aria-label="Salvar registro de atraso"
                >
                  Salvar
                </button>
              </div>
              
            </div>
          </div>
        </div>
      {% endif %}
    </form>

    <div class="container mt-5" style="margin-bottom: 100px;"></div>
  </main>
{% endblock %}
